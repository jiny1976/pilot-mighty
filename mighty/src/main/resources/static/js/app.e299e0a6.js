(function(e){function t(t){for(var n,c,s=t[0],i=t[1],l=t[2],d=0,p=[];d<s.length;d++)c=s[d],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&p.push(a[c][0]),a[c]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);u&&u(t);while(p.length)p.shift()();return r.push.apply(r,l||[]),o()}function o(){for(var e,t=0;t<r.length;t++){for(var o=r[t],n=!0,s=1;s<o.length;s++){var i=o[s];0!==a[i]&&(n=!1)}n&&(r.splice(t--,1),e=c(c.s=o[0]))}return e}var n={},a={app:0},r=[];function c(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,c),o.l=!0,o.exports}c.m=e,c.c=n,c.d=function(e,t,o){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(c.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(o,n,function(t){return e[t]}.bind(null,n));return o},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=i;r.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("2b0e"),a=(o("d3b7"),o("bc3a")),r=o.n(a),c={},s=r.a.create(c);s.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),s.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),Plugin.install=function(e,t){e.axios=s,window.axios=s,Object.defineProperties(e.prototype,{axios:{get:function(){return s}},$axios:{get:function(){return s}}})},n["a"].use(Plugin);Plugin;var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-app",[o("v-main",[o("Login",{directives:[{name:"show",rawName:"v-show",value:!1===e.isLogIn,expression:"isLogIn === false"}]}),o("router-view",{directives:[{name:"show",rawName:"v-show",value:!0===e.isLogIn,expression:"isLogIn === true"}]})],1)],1)},l=[],u=o("5530"),d=o("2f62"),p=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login"},[o("v-app",{attrs:{id:"inspire"}},[o("v-main",[o("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[o("v-row",{attrs:{align:"center",justify:"center"}},[o("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[o("v-card",{staticClass:"elevation-12"},[o("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[o("v-toolbar-title",[e._v("Mighty Login ")]),o("v-spacer")],1),o("v-card-text",[o("v-form",[o("v-text-field",{attrs:{label:"Login",name:"login","prepend-icon":"mdi-account",type:"text"},model:{value:e.userId,callback:function(t){e.userId=t},expression:"userId"}}),o("v-text-field",{attrs:{label:"Password",name:"password","prepend-icon":"mdi-lock",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),o("v-card-actions",[o("v-spacer"),o("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.actLogin({userId:e.userId,password:e.password})}}},[e._v("Login")])],1)],1)],1)],1)],1)],1)],1)],1)},g=[],f={name:"Login",components:{},computed:Object(u["a"])({},Object(d["c"])(["isLogIn"])),methods:Object(u["a"])({},Object(d["b"])(["actLogin"])),data:function(){return{userId:null,password:null}}},m=f,v=o("2877"),b=o("6544"),h=o.n(b),L=o("7496"),S=o("8336"),I=o("b0af"),w=o("99d9"),O=o("62ad"),j=o("a523"),k=o("4bd4"),y=o("f6c4"),_=o("0fd9"),x=o("2fa4"),T=o("8654"),C=o("71d9"),V=o("2a7f"),M=Object(v["a"])(m,p,g,!1,null,null,null),P=M.exports;h()(M,{VApp:L["a"],VBtn:S["a"],VCard:I["a"],VCardActions:w["a"],VCardText:w["b"],VCol:O["a"],VContainer:j["a"],VForm:k["a"],VMain:y["a"],VRow:_["a"],VSpacer:x["a"],VTextField:T["a"],VToolbar:C["a"],VToolbarTitle:V["a"]});var R={computed:Object(u["a"])({},Object(d["c"])(["isLogIn"])),methods:Object(u["a"])({},Object(d["b"])(["actLogout"])),components:{Login:P}},E=R,F=Object(v["a"])(E,i,l,!1,null,null,null),A=F.exports;h()(F,{VApp:L["a"],VMain:y["a"]});var N=o("8c4f");o("b0c0");n["a"].use(d["a"]);var $=new d["a"].Store({state:{user:null,accessToken:null,isLogIn:!1},mutations:{LoginSuccess:function(e,t){e.user=t.USERID,e.accessToken=t.ACCESSTOKEN,e.isLogIn=!0},LoginFailure:function(e){e.user=null,e.accessToken=null,e.isLogIn=!1}},actions:{actRouteMove:function(e,t){H.currentRoute.name!==t&&(console.log("cur: ",H.currentRoute.name,", target: ",t),H.push({name:t}))},actLogin:function(e,t){var o=e.dispatch,n=e.commit;r.a.post("http://127.0.0.1:8080/api/login",t).then((function(e){console.log(e);var t=e.data.USERID,a=e.data.ACCESSTOKEN;null!==t&&null!==a&&(o("addLocalStorage",{Id:t,Token:a}),n("LoginSuccess",e.data),o("actRouteMove","Main"))})).catch((function(e){console.log(e),alert("아이디와 비밀번호를 확인 하세요."),n("LoginFailure")}))},actLogout:function(e){console.log("Logout");var t=localStorage.getItem("user_id"),o=localStorage.getItem("access_token");r.a.post("http://127.0.0.1:8080/api/logout",{userId:t,token:o}).then((function(t){e.dispatch("clearLocalStorage"),e.commit("LoginFailure"),e.dispatch("actRouteMove","Login")})).catch((function(t){e.dispatch("clearLocalStorage"),e.commit("LoginFailure"),e.dispatch("actRouteMove","Login")}))},actCheckLogin:function(e){var t=localStorage.getItem("access_token"),o=localStorage.getItem("user_id");null!==t?r.a.post("http://127.0.0.1:8080/api/user",{userId:o,token:t}).then((function(t){if(200===t.status){console.log("Success 200");var o=t.data.USERID,n=t.data.ACCESSTOKEN;console.log("New Token: ",n),e.dispatch("addLocalStorage",{Id:o,Token:n}),e.commit("LoginSuccess",t.data),e.dispatch("actRouteMove","Main")}})).catch((function(t){t.response&&(console.log(t.response),403===t.response.status?e.dispatch("actLogout"):e.dispatch("actRouteMove","Login"))})):e.commit("LoginFailure")},addSessionStorage:function(e,t){console.log("addSessionStorage info: ",t),sessionStorage.setItem("user_id",t.Id),sessionStorage.setItem("access_token",t.Token)},clearSessionStorage:function(){console.log("clearSessionStorage"),sessionStorage.removeItem("user_id"),sessionStorage.removeItem("access_token")},addLocalStorage:function(e,t){console.log("addlocalStorage info: ",t),localStorage.setItem("user_id",t.Id),localStorage.setItem("access_token",t.Token)},clearLocalStorage:function(){console.log("clearlocalStorage"),localStorage.removeItem("user_id"),localStorage.removeItem("access_token")}},modules:{}}),D=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"main"},[o("v-btn",{attrs:{color:"primary"},on:{click:e.actLogout}},[e._v("Logout")])],1)},K=[],U={computed:Object(u["a"])({},Object(d["c"])(["isLogIn"])),methods:Object(u["a"])({},Object(d["b"])(["actLogout"])),data:function(){return{}},beforeRouteLeave:function(e,t,o){console.log("from: ",t),console.log("to: ",e),console.log("isLogIn: ",this.isLogIn),!0===this.isLogIn?o(!1):o()}},B=U,J=Object(v["a"])(B,D,K,!1,null,null,null),q=J.exports;h()(J,{VBtn:S["a"]}),n["a"].use(N["a"]);var z=[{path:"/",name:"Login",component:P},{path:"/main",name:"Main",component:q}],G=new N["a"]({mode:"history",base:"/",routes:z}),H=G,Q=o("f309");n["a"].use(Q["a"]);var W=new Q["a"]({});n["a"].config.productionTip=!1,new n["a"]({router:H,store:$,vuetify:W,beforeCreate:function(){this.$store.dispatch("actCheckLogin")},render:function(e){return e(A)}}).$mount("#app")}});
//# sourceMappingURL=app.e299e0a6.js.map